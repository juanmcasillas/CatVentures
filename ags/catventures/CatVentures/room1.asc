// room script file

function room_FirstLoad()
{
// room 1, door 02 = 1 (note that there are... 0..98
Doors.SetDoorState(1, 2);        
Doors.InitObject(1, oDoor2.ID); 
// go to VerbGUI.VariableExtensions() and add the code!

}

// RIGHT DOOR.
function hDoor1_AnyClick()
{
  if(Verbs.UsedAction(eGA_WalkTo)) {
    Verbs.MovePlayer(256,  135);
 }

 if (player.ActiveInventory == iKeys) {
  if (Verbs.MovePlayer(256, 135)) {
    player.FaceDirection(eDirectionRight);
    
      int dState = Doors.GetDoorState(1);
        if (dState == 2) {
              aOpenWithKey.Play();
              player.Say("Ey! the key works!");
              oDoor2.Visible = true;
              aDoorOpen.Play();
              Doors.SetDoorState(1,1); // open
              return;
        }
  }
 }   
 
 // Door, Object.ID, WalkToHotSpot, FaceHotSpot, RoomIDtoGo, CoordsInRoomToGo, FacingInNewRoom)
 //if (Doors.AnyClick(1, oDoor2.ID, 280, 140, eDirectionRight, 3, 35, 135, eDirectionRight)==0) Verbs.Unhandled();
 if (Doors.AnyClickSpecial(1, oDoor2.ID, 256, 135, eDirectionRight, 3, 35, 135, eDirectionRight, aDoorOpen,  aDoorClose, 0, 0  )==0) Verbs.Unhandled();
}



function hAlleyPicture_AnyClick()
{
   if(Verbs.UsedAction(eGA_WalkTo)) {
    Verbs.GoTo();
 }
else if(Verbs.UsedAction(eGA_LookAt)) {
      player.Say("It's a picture of a very familiar cat.");
      player.Say("In fact, is the first cat that works on a video game");
}
// don't forget this
else Verbs.Unhandled();
}

function hWindow_AnyClick()
{
  if (Verbs.UsedAction(eGA_WalkTo)) {
      // go to the window position.
      if (player.x > 80 && player.x < 120 && player.y < 130) {
        player.Say("I can't reach the window.");
        }
      else{
        Verbs.GoTo();
        }
  }
  else if(Verbs.UsedAction(eGA_LookAt)) {
      player.Say("The window is open. Shows the alley.");
  }
  else Verbs.Unhandled();
}

// left Door
function hDoor2_Mode8()
{
player.EnterRoom(2, 480, 135, eDirectionLeft);
}
